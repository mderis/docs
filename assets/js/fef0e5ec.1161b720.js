(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{163:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return o})),t.d(n,"toc",(function(){return l})),t.d(n,"default",(function(){return u}));var r=t(3),a=t(7),s=(t(0),t(168)),i={title:"Validation",slug:"/validation"},o={unversionedId:"features/validation",id:"features/validation",isDocsHomePage:!1,title:"Validation",description:"apiato uses the powerful Laravel validation system.",source:"@site/docs/features/validation.md",slug:"/validation",permalink:"/docs/docs/validation",editUrl:"https://github.com/moslem-deris/docs/edit/main/docs/features/validation.md",version:"current",lastUpdatedBy:"Moslem Deris",lastUpdatedAt:1616672537,formattedLastUpdatedAt:"3/25/2021",sidebar:"docs",previous:{title:"API Versioning",permalink:"/docs/docs/api-versioning"},next:{title:"Search Query Parameter",permalink:"/docs/docs/search-query-parameter"}},l=[{value:"Responses",id:"responses",children:[]}],c={toc:l};function u(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(s.b)("wrapper",Object(r.a)({},c,t,{components:n,mdxType:"MDXLayout"}),Object(s.b)("p",null,"apiato uses the powerful ",Object(s.b)("a",{parentName:"p",href:"https://laravel.com/docs/validation"},"Laravel validation")," system."),Object(s.b)("p",null,"But in apiato validation must be defined in the Requests components, since every request might have different rules."),Object(s.b)("p",null,"And the Validations rules are automatically applied, once injecting the Request in the Controller."),Object(s.b)("p",null,"Requests helps validating User data, accessibility, ownership and more can be added if needed."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"Example Request with Validation rules:")),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-php"},"<?php\n\nnamespace App\\Containers\\User\\UI\\API\\Requests;\n\nuse App\\Ship\\Parents\\Requests\\Request;\n\nclass RegisterUserRequest extends Request\n{\n    /**\n     * @return  array\n     */\n    public function rules()\n    {\n        return [\n            'email'    => 'required|email|max:200|unique:users,email',\n            'password' => 'required|min:20|max:300',\n            'name'     => 'required|min:2|max:400',\n        ];\n    }\n\n}\n")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"Usage from Controller Example:")),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-php"},"    public function registerUser(RegisterUserRequest $request, CreateUserAction $action)\n    {\n        // if the actions takes the request object, you can pass the entire request instance as parameter\n        $user = Apiato::call('User@RegisterUserAction', [\n            [\n                $request['email'],\n                $request['password'],\n                $request['name'],\n                $request['gender'],\n                $request['birth']\n            ]\n        ]);\n        \n        return $this->transform($user, UserTransformer::class);\n    }\n")),Object(s.b)("a",{name:"responses"}),Object(s.b)("h2",{id:"responses"},"Responses"),Object(s.b)("p",null,"Validation Error response format:"),Object(s.b)("p",null,"Single Field:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-json"},'{\n  "errors": {\n    "email": [\n      "The email has already been taken."\n    ]\n  },\n  "status_code": 422,\n  "message": "The given data failed to pass validation."\n}\n')),Object(s.b)("p",null,"Multiple Fields:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-json"},'{\n  "errors": {\n    "email": [\n      "The email field is required."\n    ],\n    "password": [\n      "The password field is required."\n    ]\n  },\n  "status_code": 422,\n  "message": "The given data failed to pass validation."\n}\n')),Object(s.b)("p",null,'More details about requests in the "Request Page".'))}u.isMDXComponent=!0},168:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return b}));var r=t(0),a=t.n(r);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=a.a.createContext({}),u=function(e){var n=a.a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=u(e.components);return a.a.createElement(c.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},m=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(t),m=r,b=p["".concat(i,".").concat(m)]||p[m]||d[m]||s;return t?a.a.createElement(b,o(o({ref:n},c),{},{components:t})):a.a.createElement(b,o({ref:n},c))}));function b(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,i=new Array(s);i[0]=m;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var c=2;c<s;c++)i[c]=t[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);